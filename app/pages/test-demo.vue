<template>
  <div class="min-h-screen p-4 sm:p-6 lg:p-8">
    <div class="max-w-4xl mx-auto">
      <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
      <div class="text-center mb-8">
        <h1 class="text-3xl font-bold mb-4">–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞</h1>
        <p class="text-gray-600 dark:text-gray-400">
          –≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ —Å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
        </p>
      </div>

      <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ—É–Ω–∫—Ü–∏—è—Ö -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
        <UCard>
          <template #header>
            <h3 class="font-semibold">üîÑ –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</h3>
          </template>
          <div class="space-y-2">
            <p class="text-sm">‚Ä¢ –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç</p>
            <p class="text-sm">‚Ä¢ –û—Ç–≤–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage</p>
            <p class="text-sm">‚Ä¢ –ú–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å —Ç–æ–≥–æ –º–µ—Å—Ç–∞, –≥–¥–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å</p>
          </div>
        </UCard>

        <UCard>
          <template #header>
            <h3 class="font-semibold">üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h3>
          </template>
          <div class="space-y-2">
            <p class="text-sm">‚Ä¢ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç</p>
            <p class="text-sm">‚Ä¢ –¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤</p>
            <p class="text-sm">‚Ä¢ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</p>
          </div>
        </UCard>

        <UCard>
          <template #header>
            <h3 class="font-semibold">üìä –ù–∞–≤–∏–≥–∞—Ü–∏—è</h3>
          </template>
          <div class="space-y-2">
            <p class="text-sm">‚Ä¢ –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —Ä–∞–∑–¥–µ–ª–∞–º–∏</p>
            <p class="text-sm">‚Ä¢ –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏</p>
            <p class="text-sm">‚Ä¢ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</p>
          </div>
        </UCard>

        <UCard>
          <template #header>
            <h3 class="font-semibold">‚è±Ô∏è –¢–∞–π–º–µ—Ä</h3>
          </template>
          <div class="space-y-2">
            <p class="text-sm">‚Ä¢ –û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏</p>
            <p class="text-sm">‚Ä¢ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –≤—Ä–µ–º–µ–Ω–∏</p>
            <p class="text-sm">‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ</p>
          </div>
        </UCard>
      </div>

      <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <UButton
          color="primary"
          size="lg"
          @click="startMockTest"
        >
          <UIcon name="i-heroicons-play" class="w-5 h-5 mr-2" />
          –ù–∞—á–∞—Ç—å –¥–µ–º–æ-—Ç–µ—Å—Ç
        </UButton>
        
        <UButton
          variant="outline"
          size="lg"
          @click="clearTestData"
        >
          <UIcon name="i-heroicons-trash" class="w-5 h-5 mr-2" />
          –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–∞
        </UButton>
      </div>

      <!-- –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–∞ -->
      <div v-if="testPassStore.hasActiveTest" class="mt-8">
        <UCard>
          <template #header>
            <h3 class="font-semibold">üìù –ê–∫—Ç–∏–≤–Ω—ã–π —Ç–µ—Å—Ç</h3>
          </template>
          
          <div class="space-y-4">
            <div class="flex items-center justify-between">
              <span>ID —Ç–µ—Å—Ç–∞:</span>
              <code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded">
                {{ testPassStore.currentTestPass?.testId }}
              </code>
            </div>
            
            <div class="flex items-center justify-between">
              <span>–û—Ç–≤–µ—á–µ–Ω–æ –≤–æ–ø—Ä–æ—Å–æ–≤:</span>
              <span class="font-medium">
                {{ testPassStore.answeredQuestionsCount }} / {{ testPassStore.totalQuestions }}
              </span>
            </div>
            
            <div class="flex items-center justify-between">
              <span>–¢–µ–∫—É—â–∏–π —Ä–∞–∑–¥–µ–ª:</span>
              <span class="font-medium">
                {{ (testPassStore.currentTestPass?.currentSectionIndex ?? 0) + 1 }}
              </span>
            </div>
            
            <div class="flex items-center justify-between">
              <span>–¢–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å:</span>
              <span class="font-medium">
                {{ (testPassStore.currentTestPass?.currentQuestionIndex ?? 0) + 1 }}
              </span>
            </div>
            
            <div class="flex items-center justify-between">
              <span>–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞:</span>
              <span class="text-sm text-gray-600">
                {{ formatTime(testPassStore.currentTestPass?.startTime) }}
              </span>
            </div>
            
            <div class="flex items-center justify-between">
              <span>–ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:</span>
              <span class="text-sm text-gray-600">
                {{ formatTime(testPassStore.currentTestPass?.lastSaveTime) }}
              </span>
            </div>
            
            <div class="pt-4 border-t">
              <UButton
                color="primary"
                @click="continueTest"
              >
                <UIcon name="i-heroicons-arrow-right" class="w-4 h-4 mr-2" />
                –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ç–µ—Å—Ç
              </UButton>
            </div>
          </div>
        </UCard>
      </div>

      <!-- –õ–æ–≥ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è -->
      <div v-if="autoSaveLog.length > 0" class="mt-8">
        <UCard>
          <template #header>
            <h3 class="font-semibold">üìã –õ–æ–≥ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è</h3>
          </template>
          
          <div class="space-y-2 max-h-40 overflow-y-auto">
            <div
              v-for="(log, index) in autoSaveLog"
              :key="index"
              class="text-sm p-2 bg-gray-50 dark:bg-gray-800 rounded"
            >
              <span class="text-gray-500">{{ formatTime(log.timestamp) }}</span>
              <span class="ml-2">{{ log.message }}</span>
            </div>
          </div>
        </UCard>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { useTestPassStore } from '~/stores/testPass'

const router = useRouter()
const testPassStore = useTestPassStore()

// –õ–æ–≥ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
const autoSaveLog = ref<Array<{ timestamp: string; message: string }>>([])

// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
const formatTime = (isoString?: string) => {
  if (!isoString) return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'
  return new Date(isoString).toLocaleString('ru-RU')
}

// –°–æ–∑–¥–∞–Ω–∏–µ mock —Ç–µ—Å—Ç–∞
const createMockTest = (): Test => {
  return {
    id: 'mock-test-' + Date.now(),
    title: '–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é',
    description: '–¢–µ—Å—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ —Å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–µ–π –¥–∞–Ω–Ω—ã—Ö',
    timeLimit: 60, // 60 –º–∏–Ω—É—Ç –Ω–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞
    randomizeQuestions: false,
    randomizeAnswers: false,
    difficultyDistribution: { easy: 30, medium: 50, hard: 20 },
    sections: [
      { 
        id: 'section-1', 
        title: '–û—Å–Ω–æ–≤—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è', 
        description: '–ë–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è' 
      },
      { 
        id: 'section-2', 
        title: '–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞', 
        description: '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏' 
      },
      { 
        id: 'section-3', 
        title: '–§—Ä–µ–π–º–≤–æ—Ä–∫–∏', 
        description: '–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏' 
      }
    ],
    questions: [
      // –†–∞–∑–¥–µ–ª 1: –û—Å–Ω–æ–≤—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
      {
        id: 'q1',
        title: '–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–∏–±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
        difficulty: 'easy',
        points: 1,
        correctAnswersCount: 1,
        answers: [
          { id: 'a1', text: '–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö' },
          { id: 'a2', text: '–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö' },
          { id: 'a3', text: '–§—É–Ω–∫—Ü–∏—è' },
          { id: 'a4', text: '–ö–ª–∞—Å—Å' }
        ]
      },
      {
        id: 'q2',
        title: '–ö–∞–∫–∏–µ —Ç–∏–ø—ã —Ü–∏–∫–ª–æ–≤ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã',
        difficulty: 'medium',
        points: 2,
        correctAnswersCount: 4,
        answers: [
          { id: 'a5', text: 'for' },
          { id: 'a6', text: 'while' },
          { id: 'a7', text: 'do-while' },
          { id: 'a8', text: 'foreach' }
        ]
      },
      {
        id: 'q3',
        title: '–ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–µ–∫—É—Ä—Å–∏—è?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
        difficulty: 'hard',
        points: 3,
        correctAnswersCount: 1,
        answers: [
          { id: 'a9', text: '–ü—Ä–æ—Ü–µ—Å—Å, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç —Å–∞–º–∞ —Å–µ–±—è' },
          { id: 'a10', text: '–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö' },
          { id: 'a11', text: '–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö' },
          { id: 'a12', text: '–ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏' }
        ]
      },
      
      // –†–∞–∑–¥–µ–ª 2: –í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
      {
        id: 'q4',
        title: '–ß—Ç–æ —Ç–∞–∫–æ–µ HTML?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
        difficulty: 'easy',
        points: 1,
        correctAnswersCount: 1,
        answers: [
          { id: 'a13', text: '–Ø–∑—ã–∫ —Ä–∞–∑–º–µ—Ç–∫–∏ –≥–∏–ø–µ—Ä—Ç–µ–∫—Å—Ç–∞' },
          { id: 'a14', text: '–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è' },
          { id: 'a15', text: '–°—Ç–∏–ª–∏' },
          { id: 'a16', text: '–°–∫—Ä–∏–ø—Ç' }
        ]
      },
      {
        id: 'q5',
        title: '–ö–∞–∫–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã',
        difficulty: 'medium',
        points: 2,
        correctAnswersCount: 4,
        answers: [
          { id: 'a17', text: 'HTML' },
          { id: 'a18', text: 'CSS' },
          { id: 'a19', text: 'JavaScript' },
          { id: 'a20', text: 'PHP' }
        ]
      },
      
      // –†–∞–∑–¥–µ–ª 3: –§—Ä–µ–π–º–≤–æ—Ä–∫–∏
      {
        id: 'q6',
        title: '–ß—Ç–æ —Ç–∞–∫–æ–µ Vue.js?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
        difficulty: 'medium',
        points: 2,
        correctAnswersCount: 1,
        answers: [
          { id: 'a21', text: 'JavaScript —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤' },
          { id: 'a22', text: '–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è' },
          { id: 'a23', text: '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö' },
          { id: 'a24', text: '–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞' }
        ]
      },
      {
        id: 'q7',
        title: '–ö–∞–∫–∏–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã',
        difficulty: 'easy',
        points: 1,
        correctAnswersCount: 2,
        answers: [
          { id: 'a25', text: 'Vue.js' },
          { id: 'a26', text: 'Nuxt.js' },
          { id: 'a27', text: 'React' },
          { id: 'a28', text: 'Angular' }
        ]
      },
      
      // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ 1: –û—Å–Ω–æ–≤—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
      {
        id: 'q8',
        title: '–ß—Ç–æ —Ç–∞–∫–æ–µ –∞–ª–≥–æ—Ä–∏—Ç–º?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
        difficulty: 'easy',
        points: 1,
        correctAnswersCount: 1,
        answers: [
          { id: 'a29', text: '–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏' },
          { id: 'a30', text: '–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è' },
          { id: 'a31', text: '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö' },
          { id: 'a32', text: '–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞' }
        ]
      },
      {
        id: 'q9',
        title: '–ö–∞–∫–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –≤—ã –∑–Ω–∞–µ—Ç–µ?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã',
        difficulty: 'medium',
        points: 2,
        correctAnswersCount: 4,
        answers: [
          { id: 'a33', text: '–ú–∞—Å—Å–∏–≤' },
          { id: 'a34', text: '–°–ø–∏—Å–æ–∫' },
          { id: 'a35', text: '–°—Ç–µ–∫' },
          { id: 'a36', text: '–û—á–µ—Ä–µ–¥—å' }
        ]
      },
      {
        id: 'q10',
        title: '–ß—Ç–æ —Ç–∞–∫–æ–µ Big O notation?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
        difficulty: 'hard',
        points: 3,
        correctAnswersCount: 1,
        answers: [
          { id: 'a37', text: '–û–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞' },
          { id: 'a38', text: '–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö' },
          { id: 'a39', text: '–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è' },
          { id: 'a40', text: '–§—Ä–µ–π–º–≤–æ—Ä–∫' }
        ]
      },
      {
        id: 'q11',
        title: '–ß—Ç–æ —Ç–∞–∫–æ–µ —Ñ—É–Ω–∫—Ü–∏—è?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
        difficulty: 'easy',
        points: 1,
        correctAnswersCount: 1,
        answers: [
          { id: 'a41', text: '–ë–ª–æ–∫ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É' },
          { id: 'a42', text: '–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è' },
          { id: 'a43', text: '–ö–ª–∞—Å—Å' },
          { id: 'a44', text: '–ú–æ–¥—É–ª—å' }
        ]
      },
      {
        id: 'q12',
        title: '–ö–∞–∫–∏–µ –ø–∞—Ä–∞–¥–∏–≥–º—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—Ç?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã',
        difficulty: 'medium',
        points: 2,
        correctAnswersCount: 3,
        answers: [
          { id: 'a45', text: '–ü—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ' },
          { id: 'a46', text: '–û–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ' },
          { id: 'a47', text: '–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ' },
          { id: 'a48', text: '–ú–∞—à–∏–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ' }
        ]
      },
      
      // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ 2: –í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
      {
        id: 'q13',
        title: '–ß—Ç–æ —Ç–∞–∫–æ–µ CSS?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
        difficulty: 'easy',
        points: 1,
        correctAnswersCount: 1,
        answers: [
          { id: 'a49', text: '–Ø–∑—ã–∫ —Å—Ç–∏–ª–µ–π –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü' },
          { id: 'a50', text: '–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è' },
          { id: 'a51', text: '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö' },
          { id: 'a52', text: '–°–µ—Ä–≤–µ—Ä' }
        ]
      },
      {
        id: 'q14',
        title: '–ß—Ç–æ —Ç–∞–∫–æ–µ JavaScript?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
        difficulty: 'easy',
        points: 1,
        correctAnswersCount: 1,
        answers: [
          { id: 'a53', text: '–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏' },
          { id: 'a54', text: '–Ø–∑—ã–∫ —Ä–∞–∑–º–µ—Ç–∫–∏' },
          { id: 'a55', text: '–°—Ç–∏–ª–∏' },
          { id: 'a56', text: '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö' }
        ]
      },
      {
        id: 'q15',
        title: '–ö–∞–∫–∏–µ HTTP –º–µ—Ç–æ–¥—ã –≤—ã –∑–Ω–∞–µ—Ç–µ?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã',
        difficulty: 'medium',
        points: 2,
        correctAnswersCount: 4,
        answers: [
          { id: 'a57', text: 'GET' },
          { id: 'a58', text: 'POST' },
          { id: 'a59', text: 'PUT' },
          { id: 'a60', text: 'DELETE' }
        ]
      },
      {
        id: 'q16',
        title: '–ß—Ç–æ —Ç–∞–∫–æ–µ API?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
        difficulty: 'medium',
        points: 2,
        correctAnswersCount: 1,
        answers: [
          { id: 'a61', text: '–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏' },
          { id: 'a62', text: '–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è' },
          { id: 'a63', text: '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö' },
          { id: 'a64', text: '–§—Ä–µ–π–º–≤–æ—Ä–∫' }
        ]
      },
      {
        id: 'q17',
        title: '–ß—Ç–æ —Ç–∞–∫–æ–µ REST API?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
        difficulty: 'hard',
        points: 3,
        correctAnswersCount: 1,
        answers: [
          { id: 'a65', text: '–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–∏—Å–æ–≤' },
          { id: 'a66', text: '–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è' },
          { id: 'a67', text: '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö' },
          { id: 'a68', text: '–§—Ä–µ–π–º–≤–æ—Ä–∫' }
        ]
      },
      
      // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ 3: –§—Ä–µ–π–º–≤–æ—Ä–∫–∏
      {
        id: 'q18',
        title: '–ß—Ç–æ —Ç–∞–∫–æ–µ React?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
        difficulty: 'medium',
        points: 2,
        correctAnswersCount: 1,
        answers: [
          { id: 'a69', text: 'JavaScript –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤' },
          { id: 'a70', text: '–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è' },
          { id: 'a71', text: '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö' },
          { id: 'a72', text: '–°–µ—Ä–≤–µ—Ä' }
        ]
      },
      {
        id: 'q19',
        title: '–ß—Ç–æ —Ç–∞–∫–æ–µ Angular?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
        difficulty: 'medium',
        points: 2,
        correctAnswersCount: 1,
        answers: [
          { id: 'a73', text: 'JavaScript —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –æ—Ç Google' },
          { id: 'a74', text: '–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è' },
          { id: 'a75', text: '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö' },
          { id: 'a76', text: '–°–µ—Ä–≤–µ—Ä' }
        ]
      },
      {
        id: 'q20',
        title: '–ö–∞–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã',
        difficulty: 'medium',
        points: 2,
        correctAnswersCount: 3,
        answers: [
          { id: 'a77', text: '–£—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏' },
          { id: 'a78', text: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞' },
          { id: 'a79', text: '–ì–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è' },
          { id: 'a80', text: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ' }
        ]
      },
      {
        id: 'q21',
        title: '–ß—Ç–æ —Ç–∞–∫–æ–µ Node.js?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
        difficulty: 'medium',
        points: 2,
        correctAnswersCount: 1,
        answers: [
          { id: 'a81', text: '–°—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è JavaScript –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ' },
          { id: 'a82', text: '–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è' },
          { id: 'a83', text: '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö' },
          { id: 'a84', text: '–§—Ä–µ–π–º–≤–æ—Ä–∫' }
        ]
      },
      {
        id: 'q22',
        title: '–ß—Ç–æ —Ç–∞–∫–æ–µ TypeScript?',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ',
        difficulty: 'medium',
        points: 2,
        correctAnswersCount: 1,
        answers: [
          { id: 'a85', text: '–¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JavaScript' },
          { id: 'a86', text: '–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è' },
          { id: 'a87', text: '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö' },
          { id: 'a88', text: '–§—Ä–µ–π–º–≤–æ—Ä–∫' }
        ]
      }
    ],
    questionSectionLinks: [
      // –†–∞–∑–¥–µ–ª 1: –û—Å–Ω–æ–≤—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è (8 –≤–æ–ø—Ä–æ—Å–æ–≤)
      { questionId: 'q1', sectionId: 'section-1' },
      { questionId: 'q2', sectionId: 'section-1' },
      { questionId: 'q3', sectionId: 'section-1' },
      { questionId: 'q8', sectionId: 'section-1' },
      { questionId: 'q9', sectionId: 'section-1' },
      { questionId: 'q10', sectionId: 'section-1' },
      { questionId: 'q11', sectionId: 'section-1' },
      { questionId: 'q12', sectionId: 'section-1' },
      
      // –†–∞–∑–¥–µ–ª 2: –í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (7 –≤–æ–ø—Ä–æ—Å–æ–≤)
      { questionId: 'q4', sectionId: 'section-2' },
      { questionId: 'q5', sectionId: 'section-2' },
      { questionId: 'q13', sectionId: 'section-2' },
      { questionId: 'q14', sectionId: 'section-2' },
      { questionId: 'q15', sectionId: 'section-2' },
      { questionId: 'q16', sectionId: 'section-2' },
      { questionId: 'q17', sectionId: 'section-2' },
      
      // –†–∞–∑–¥–µ–ª 3: –§—Ä–µ–π–º–≤–æ—Ä–∫–∏ (7 –≤–æ–ø—Ä–æ—Å–æ–≤)
      { questionId: 'q6', sectionId: 'section-3' },
      { questionId: 'q7', sectionId: 'section-3' },
      { questionId: 'q18', sectionId: 'section-3' },
      { questionId: 'q19', sectionId: 'section-3' },
      { questionId: 'q20', sectionId: 'section-3' },
      { questionId: 'q21', sectionId: 'section-3' },
      { questionId: 'q22', sectionId: 'section-3' }
    ],
    author: {
      id: 'demo-author',
      name: '–î–µ–º–æ –ê–≤—Ç–æ—Ä',
      email: 'demo@example.com',
      picture: '',
      role: 'user'
    },
    createdAt: new Date().toISOString(),
    updatedAt: new Date().toISOString()
  }
}

// –ù–∞—á–∞—Ç—å mock —Ç–µ—Å—Ç
const startMockTest = () => {
  const mockTest = createMockTest()
  testPassStore.startTest(mockTest)
  
  // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –ª–æ–≥
  autoSaveLog.value.unshift({
    timestamp: new Date().toISOString(),
    message: `–¢–µ—Å—Ç "${mockTest.title}" –Ω–∞—á–∞—Ç`
  })
  
  // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Ç–µ—Å—Ç—É
  router.push(`/test/${mockTest.id}`)
}

// –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ç–µ—Å—Ç
const continueTest = () => {
  if (testPassStore.currentTestPass) {
    router.push(`/test/${testPassStore.currentTestPass.testId}`)
  }
}

// –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–∞
const clearTestData = () => {
  testPassStore.clearTest()
  autoSaveLog.value = []
  
  // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –ª–æ–≥
  autoSaveLog.value.unshift({
    timestamp: new Date().toISOString(),
    message: '–î–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–∞ –æ—á–∏—â–µ–Ω—ã'
  })
}

// –°–ª—É—à–∞–µ–º –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
let originalConsoleLog: typeof console.log

onMounted(() => {
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π console.log
  originalConsoleLog = console.log
  
  // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º console.log –¥–ª—è –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
  console.log = (...args) => {
    if (args[0]?.includes?.('üîÑ AutoSave')) {
      autoSaveLog.value.unshift({
        timestamp: new Date().toISOString(),
        message: args[0]
      })
      
      // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –ª–æ–≥–µ
      if (autoSaveLog.value.length > 10) {
        autoSaveLog.value = autoSaveLog.value.slice(0, 10)
      }
    }
    originalConsoleLog.apply(console, args)
  }
})

// –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º console.log –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
onUnmounted(() => {
  if (originalConsoleLog) {
    console.log = originalConsoleLog
  }
})
</script> 